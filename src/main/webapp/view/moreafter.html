<!DOCTYPE html>
<!--suppress ALL-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>å”®ååˆ—è¡¨</title>
    <link rel="stylesheet" href="/layui/css/layui.css" media="all">
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/layui/layui.js"></script>
</head>
<body>
<div class="layui-inline">
    <h1>å”®ååˆ—è¡¨</h1>
</div>
<div class="layui-inline" style="left: 900px;">
    <a href="javascript:window.opener=null;window.open('','_self');window.close();" style="color: black" class="layui-btn layui-icon layui-icon-return" ><font color="black">è¿”å›</font></a>
    <a href="javascript:;" id="flush" style="color: black"  class="layui-btn layui-icon layui-icon-refresh"><font color="black">åˆ·æ–°</font></a>
</div>
<hr></hr>
<!--å³ä¾§-->
<div>
        <form class="layui-form">
            <!--ä¸‹æ‹‰æ¡†-->
            <input type="hidden" id="cid" name="cid" th:value="${cid}" />
            <div class="layui-inline" style="height: 40px;width: 180px;">
                <select name="name">
                    <option value=''>è¯·é€‰æ‹©</option>
                    <option value="assubject">æŒ‰ä¸»é¢˜</option>
                    <option value="servicetype">æŒ‰æœåŠ¡ç±»å‹</option>
                    <option value="beginservicedate">æŒ‰å¼€å§‹æ—¶é—´</option>
                    <option value="serviceperson">æŒ‰æœåŠ¡äººå‘˜</option>
                    <option value="servicecore">æŒ‰æœåŠ¡è¯„åˆ†</option>
                </select>
            </div>
            <!--æ–‡æœ¬æ¡†-->
            <div class="layui-inline" style="height: 40px;width: 300px;">
                <input type="text" name="value" height="0" size="80px;"
                       placeholder="è¯·è¾“å…¥å…³é”®å­—æ¨¡ç³ŠæŸ¥è¯¢" autocomplete="off" class="layui-input">
            </div>
            <div class="layui-inline">
                <button class="layui-btn" lay-submit lay-filter="search" style="width: 90px;height: 40px;">ğŸ”æŸ¥æ‰¾
                </button>
            </div>
        </form>
    </div>
    <!--<table lay-even lay-skin="line" lay-size="lg" id="demo" lay-filter="test" class="layui-table"></table>-->
    <table id="demo" lay-filter="test" style="width: 100%"></table>

<script type="text/html" id="subject">
    <a href="/aftersales/queryAfterSalesDetail.do?asid={{d.asid}}" style="color: #01AAED" target="_blank">{{d.assubject}}</a>
</script>
<script>
    var cid=$("#cid").val();
    layui.use(['laydate', 'form', 'table', 'jquery'], function () {
        var laydate = layui.laydate,
            table = layui.table,
            form = layui.form,
            $ = layui.jquery;

        //åˆ·æ–°
        $("#flush").click(function () {
            table.reload('demo', {
                url: '/aftersales/afterList.do'
                , where: {
                    limit: 5,
                    cid:cid
                } //è®¾å®šå¼‚æ­¥æ•°æ®æ¥å£çš„é¢å¤–å‚æ•°
                //,height: 300
            });
        });

        //è¡¨æ ¼é‡è½½
        form.on('submit(search)', function (data) {
            var kv = data.field //å½“å‰å®¹å™¨çš„å…¨éƒ¨è¡¨å•å­—æ®µï¼Œåå€¼å¯¹å½¢å¼ï¼š{name: value}
            //æ‰§è¡Œé‡è½½ æ¨¡ç³ŠæŸ¥è¯¢
            tableIns.reload({
                url: '/aftersales/afterList.do'
                , where: kv
            });
            return false; //é˜»æ­¢è¡¨å•è·³è½¬ã€‚å¦‚æœéœ€è¦è¡¨å•è·³è½¬ï¼Œå»æ‰è¿™æ®µå³å¯ã€‚
        });

        //ç¬¬ä¸€ä¸ªè¡¨æ ¼
        var tableIns = table.render({
            elem: '#demo'
            , height: 'auto'
            , title: 'å”®åæœåŠ¡ä¸€è§ˆ'
            , autoSort: true
            , url: '/aftersales/afterList.do?cid='+cid //æ•°æ®æ¥å£
            , page: true //å¼€å¯åˆ†é¡µ
            , limit: 10
            , limits: [1, 3, 5, 7, 10, 20, 30]
            , cols: [
                [ //è¡¨å¤´
                    {field: 'assubject', title: 'ä¸»é¢˜', align: 'center', width: 1366 * 0.38, toolbar: '#subject'}
                    , {field: 'servicetype', title: 'æœåŠ¡ç±»å‹', align: 'center', width: 1366 * 0.1}
                    , {
                    field: 'beginservicedate',
                    title: 'å¼€å§‹æ—¶é—´',
                    align: 'center',
                    width: 1366 * 0.1,
                    templet: "<div>{{layui.util.toDateString(d.starttime, 'yyyy-MM-dd')}}</div>"
                }
                    , {field: 'serviceperson', title: 'æœåŠ¡äººå‘˜', align: 'center', width: 1366 * 0.1}
                    , {field: 'servicecore', title: 'æœåŠ¡è¯„åˆ†', align: 'center'}
                ]
            ]
        });


    });

</script>
</body>
</html>