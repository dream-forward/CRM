<!DOCTYPE html>
<!--suppress ALL-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>å½“å‰å®¢æˆ·ä¸‹æ‰€æœ‰åˆåŒ</title>
    <link rel="stylesheet" href="/layui/css/layui.css" media="all">
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/layui/layui.js"></script>
</head>
<body>
<div class="layui-inline">
    <h1>åˆåŒåˆ—è¡¨</h1>
</div>
<div class="layui-inline" style="left: 900px;">
    <a href="javascript:window.opener=null;window.open('','_self');window.close();" style="color: black" class="layui-btn layui-icon layui-icon-return" ><font color="black">è¿”å›</font></a>
    <a href="javascript:;" id="flush" style="color: black"  class="layui-btn layui-icon layui-icon-refresh"><font color="black">åˆ·æ–°</font></a>
</div>
<hr></hr>

<form class="layui-form" style="margin-left: 300px;">
    <input type="hidden" name="cid" id="cid" th:value="${cid}">
    <!--ä¸‹æ‹‰æ¡†-->
    &nbsp;&nbsp;&nbsp;&nbsp;        <div class="layui-inline" style="height: 40px;width: 180px;">
    <select id="selectss" name="selectss">
        <option value="">è¯·é€‰æ‹©</option>
        <option value="1">æŒ‰åˆåŒåç§°</option>
        <option value="2">æŒ‰åˆåŒç¼–å·</option>
        <option value="3">æŒ‰åˆåŒæ‰€å±éƒ¨é—¨</option>
        <option value="4">æŒ‰å…³è”äººå‘˜</option>
        <option value="5">æŒ‰åˆåŒé‡‘é¢</option>
        <option value="6">æŒ‰ç­¾çº¦æ—¥æœŸ</option>
    </select>
</div>
    <!--æ–‡æœ¬æ¡†-->
    <div class="layui-inline" style="height: 40px;width: 300px;">
        <input type="text" name="inputss" height="0" size="80px;" required lay-verify="required"
               placeholder="è¯·è¾“å…¥å…³é”®å­—æŸ¥è¯¢" autocomplete="off" class="layui-input">
    </div>
    <div class="layui-inline">
        <button class="layui-btn" lay-submit  lay-filter="demo1" style="width: 90px;height: 40px;">ğŸ”æŸ¥æ‰¾
        </button>
    </div>
</form>

<script type="text/html" id="conname">
    <a class="layui-table-link" target="blank" onclick=window.location.href="/contract/ToUpdate.do?conid={{d.conid}}">{{d.conname}}</a>
</script>

<script type="text/html" id="incmoney">
    <a class="layui-table-link" target="blank" onclick=window.location.href="/contract/ToUpdate.do?conid={{d.conid}}">{{d.incmoney}}</a>
</script>

<table id="demo" lay-filter="test" style="width: 100%"></table>
<script>
    var cid=$("#cid").val();

    layui.use(['form', 'table','jquery'], function () {
        var form = layui.form;
        var table = layui.table;
        var $ = layui.jquery;

        //åˆ·æ–°
        $("#flush").click(function () {
            table.reload('demo', {
                url: '/contract/queryConByCid.do'
                , where: {
                    limit: 10,
                    cid:cid
                } //è®¾å®šå¼‚æ­¥æ•°æ®æ¥å£çš„é¢å¤–å‚æ•°
//,height: 300
            });
        });

        //ç¬¬ä¸€ä¸ªè¡¨æ ¼
        var tableIns = table.render({
            elem: '#demo'
            , height: 'auto'
            , autoSort: true
            , url: '/contract/queryConByCid.do?cid='+cid //æ•°æ®æ¥å£
            , page: true //å¼€å¯åˆ†é¡µ
            , limit: 10
            , limits: [1, 3, 5, 7, 10, 20, 30]
            , cols: [
                [ //è¡¨å¤´
                    {field: 'conname', title: 'åˆåŒåç§°',align: 'center',toolbar:'#conname'}
                    , {field: 'connum', title: 'åˆåŒç¼–å·', align: 'center'}
                    , {field: 'conmoney', title: 'åˆåŒé‡‘é¢',align: 'center'}
                    , {field: 'incmoney', title: 'æ±‡æ¬¾é¢',align: 'center',toolbar:'#incmoney'}
                    , {field: 'billmoney', title: 'å¼€ç¥¨é¢',align: 'center'}
                    , {field: 'condate', title: 'ç­¾çº¦æ—¥æœŸ',align: 'center',templet: "<div>{{layui.util.toDateString(d.starttime, 'yyyy-MM-dd')}}</div>"}
                ]
            ]
        });


        //æœç´¢æŒ‰é’®
        form.on('submit(demo1)', function(data){
            table.reload('demo',{
                url: '/contract/queryConByCid.do',
                where:data.field,
                method:'post',
                page: {
                    curr: 1 //é‡æ–°ä»ç¬¬ 1 é¡µå¼€å§‹
                }
            });
            return false;
        });
    });
</script>
</body>
</html>